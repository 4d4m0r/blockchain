<!DOCTYPE html>
<html lang="en">
<head>
	<title>Seguro Fiança</title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

	<!-- <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js@1.0.0-beta.34/dist/web3.min.js"></script> -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.4.0-rc.0/web3.min.js"></script>
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-light" style="background-color: #CDA3D0;">
	  <div class="container-fluid">
	    <a class="navbar-brand" href="#">ALUG</a>
	   
	    <div class="collapse navbar-collapse" id="navbarNav">
	      <ul class="navbar-nav">
	        <li class="nav-item">
	          <a class="nav-link active" aria-current="page" href="index.html">Home</a>
	        </li>
	         <li class="nav-item">
	          <a class="nav-link active" aria-current="page" href="segurado.html">Segurado</a>
	        </li>
	         <li class="nav-item">
	          <a class="nav-link active" aria-current="page" href="seguradora.html">Seguradora</a>
	        </li>
	       
	      </ul>
	    </div>
	  </div>
	</nav>

	<div class="container-fluid" style="background-color: #98FF98;">
		<div class="row">
			<div class="col-6">
				<img src="./img/logo2.png">
			</div>
			<div class="col-6">
				<div class="container">
					<div class="row">
						<div class="col-1"></div>
						<div class="col-11" style="height: 300px;">
							<br><br><br><br><br>							
							<h1 style="font-size: 3rem;">Bem-vindo,<br>Igor.</h1>
						</div>
						
					</div>
				</div>
			</div>
		</div>
	</div>
	<!--

	você não tem nenhum contrato ativo" ok

	"receber por email"ok

	ler termos do contrato, ok

	quais são as regras para conseguir o dinheiro de volta

	pq não pega o endereço do local

	checkbox "leu e está de acordo com o contrato"ok

	dizer que as pessoas tem 0 contratos ativos ok

	já colocou as informações dele necessárias para o contrato

	mostrar a parte desenvolvida em blockchain

	simular lista de cadastrados no pool

	falar o valor devolvido

	valor a ser devolvido em x meses(?) - colocar cada segurado 

	explicar o conceito do pool - é um conceito novo pra muita gente

	previsão de quanto pagará no final

	colocar um pdf para baixar - aceite

	pagamento que só aperta um botão - falar que já está com a carteira conectada
	-->
	<div class="container-fluid">
		<div class="row">
			<div class="col" style="background-color: #262729">
				<div class="container">
					<br>
					<div class="row">
						<br>
						<div class="col-1"></div>
						<div class="col-10">
							<div class="row">
								<div class="col-md-6">
								<div class="form-check form-switch"> 
							  <label class="form-check-label" for="flexSwitchCheckChecked"><font color="white">Conexão com a carteira</font></label>
							  <input class="form-check-input" type="checkbox" role="switch" id="contrato" checked>
							</div>
							</div>
							
							

							</div>
							
						</div>
						
					</div>
					<div class="row">
						<div class="col-1"></div>
						<div class="col-10" style="height: 300px;">
							<br>
							<form class="row g-3">
								  <div class="col-md-6">
								     <label for="formGroupExampleInput" class="form-label"><font color="white">Duração em meses do contrato:</font> </label>
							  		 <input type="text" class="form-control" name="duracaoContrato" id="duracaoContrato">
								  </div>
								  <div class="col-md-6">
								     <label for="formGroupExampleInput2" class="form-label"><font color="white">Valor do aluguel mensal:</font></label>
							  		<input type="text" class="form-control" name="aluguel" id="aluguel">
								  </div>
								  <div class="col-12">
								    <label for="formGroupExampleInput2" class="form-label"><font color="white">Quantidade de parcelas:</font></label>
							  		<input type="text" class="form-control" name="parcelas" id="parcelas">
								  </div>
								  <div class="col-12">
								    <label for="inputAddress2" class="form-label"><font color="white">Endereço do Imóvel:</font></label>
								    <input type="text" class="form-control" id="inputAddress2" >
								  </div>
								  <div class="col-6">
								  	<br><br>
								    <button data-bs-toggle="modal" data-bs-target="#exampleModal" type="button" class="btn btn-success" style="background-color:#98FF98;" id="setme"><font color="#000000">Cadastrar contrato.</font></button>
								  </div>
								  <div class="col-6">
								  	<br><br>
								  	<div class="form-check">
								      <input class="form-check-input" type="checkbox" value="" id="invalidCheck" required>
								      <label class="form-check-label" for="invalidCheck">
		
								       <p type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
										   <font color="white">Aceito os termos e condições.</font>
										</p>
								      </label>
								     </div>
								  </div>
								</form>
							<br>							
						
						</div>
						<div class="col"></div>
				
					</div>
				</div>
				<br><br><br><br><br><br><br><br><br><br><br><br>
			</div>
		</div>
	</div>
	<!-- Button trigger modal -->

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Termos de Condições e Uso.</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
        Por meio do aceite aos presentes Termos, o Usuário declara:<br>

a) Ser civilmente capaz à luz da legislação brasileira, ou devidamente autorizado por seus responsáveis legais;<br>
b) Estar ciente de que é o único e exclusivo responsável pelo fornecimento de informações fidedignas, exatas e atualizadas quando de seu acesso e pela atualização dos Canais de Acesso e seus efeitos, responsabilizandose, inclusive perante terceiros, por danos ou prejuízos decorrentes de informações ilícitas, incorretas, incompletas ou inverídicas e por referida utilização e efeitos;<br>
c) Entender que é o único responsável pelas operações financeiras que realiza por meio dos Canais de Acesso, assumindo todos os riscos a elas inerentes;<br>
d) Reconhecer que os Canais de Acesso não devem ser utilizados para quaisquer fins ilícitos;<br>
e) Ter ciência de que quaisquer condições e especificidades dos serviços disponíveis podem ser diferentes de acordo com cada Canal de Acesso, não possuindo o MODAL qualquer obrigação e/ou responsabilidade de apresentar condições idênticas para diferentes meios de acesso, bem como que as informações e/ou ofertas apresentadas por meio dos Canais de Acesso poderão ser modificadas a qualquer tempo pelo MODAL, a seu exclusivo critério;<br>
f) Reconhecer que não poderá ser inserido qualquer conteúdo ou material capaz de incorporar elementos nocivos aos Canais de Acesso, por quaisquer meios e formas, capazes de impedir o normal funcionamento dos Canais de Acesso, bem como de prejudicar os sistemas informáticos do MODAL ou de terceiros, de danificar documentos e/ou arquivos eletrônicos nestes armazenados;<br>
g) Compreender que o nome preenchido, a foto ou a imagem, o código de segurança enviado para o seu celular e inserido no meio eletrônico selecionado, o token ou pin, a senha eletrônica e outros dados que venham a ser solicitados, representam, em conjunto ou separadamente, a sua assinatura digital e correspondem à sua documentação eletrônica, bem como que suas credenciais de acesso são de natureza confidencial, pessoal e intransferível, não devendo ser fornecidas ou repassadas de qualquer forma a terceiros, isentando o MODAL de toda e qualquer responsabilidade por danos e prejuízos decorrentes do uso indevido dos Canais de Acesso e de tais credenciais;<br>
h) Entender que, em caso de suspeita de ocorrência de fraude ou qualquer outra atividade suspeita identificada, seu acesso aos Canais de Acesso poderá ser suspenso ou bloqueado a qualquer tempo pelo MODAL; <br>
i) Reconhecer que é o único responsável por acessar os Canais de Acesso, devendo se utilizar de meios seguros e respeitar as melhores práticas de segurança nas redes.<br>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar e aceitar.</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Cadastro concluído!</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
		Seu contrato de seguro já foi realizado.Verifique seu email para mais informações e acesse sua página de segurado.       
		</div>
      <div class="modal-footer">
      </div>
    </div>
  </div>
</div>
	<div class="container">
	  <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
	    <div class="col-md-4 d-flex align-items-center">
	      <a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1">
	        <svg class="bi" width="30" height="24"><use xlink:href="#bootstrap"></use></svg>
	      </a>
	      <span class="text-muted">© 2021 ALUG, Inc</span>
	    </div>

	    <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
	      <li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#twitter"></use></svg></a></li>
	      <li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#instagram"></use></svg></a></li>
	      <li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#facebook"></use></svg></a></li>
	    </ul>
	  </footer>
	</div>

	<button class="enableEthereumButton">Conectar Carteira</button>
	<script type="text/javascript">
		const ethereumButton = document.querySelector('.enableEthereumButton');

		ethereumButton.addEventListener('click', () => {
		  //Will Start the metamask extension
		  ethereum.request({ method: 'eth_requestAccounts' });
		});

		const ethEnabled = async () => {
		  if (window.ethereum) {
    			await window.ethereum.send('eth_requestAccounts');
					window.web3 = new Web3(window.ethereum);
					window.Seguro = new window.web3.eth.Contract([
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "duracaoContrato",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "aluguel",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "parcelas",
				"type": "uint256"
			}
		],
		"name": "contratarSeguro",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "cadastro",
				"type": "uint256"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "devolucao",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "dinheiroDevolvido",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "cadastro",
				"type": "uint256"
			}
		],
		"name": "getDados",
		"outputs": [
			{
				"internalType": "address",
				"name": "carteira",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "pagamentos",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "recebimentoSinistro",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "duracaoContrato",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "ehSegurado",
				"type": "bool"
			},
			{
				"internalType": "uint256",
				"name": "valorApolice",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "ParcelaPremio",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "valorSinistro",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "aluguel",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "parcelasApolice",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getInformacao",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getMontante",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "pagarPremio",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "cadastro",
				"type": "uint256"
			}
		],
		"name": "receberSinistro",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	}
], '0xC1FB97f3B2ab977ee2369Ded38D086Dd94C29B7Ccccccccccc');
					saveCoinbase();
					return true;
  		  }
		  return false;
		}


		async function saveCoinbase () {
		  window.coinbase = await window.web3.eth.getCoinbase();
		};


		async function contratarSeguro () {
			var duracaoContrato = document.getElementById("duracaoContrato").value;
			var aluguel = document.getElementById("aluguel").value;
			var parcelas = document.getElementById("parcelas").value;
		  	window.Seguro.methods.contratarSeguro(duracaoContrato,aluguel,parcelas).send(duracaoContrato,aluguel,parcelas, {from:window.coinbase}).then(console.log);

		}

		async function pagarPremio () {
		  window.Seguro.methods.pagarPremio().send({from:window.coinbase});
		}

		async function pagarSinistro () {
			var cadastro1 = document.getElementById("cadastro1").value;
		  	window.Seguro.methods.receberSinistro(cadastro1).send(cadastro1,{from:window.coinbase}).then(console.log);
		}
		async function devolucao () {
		  window.Seguro.methods.devolucao().send({from:window.coinbase});
		}

		async function getDados () {
			var cadastro = document.getElementById("cadastro").value;
		  	var dados = window.Seguro.methods.getDados(cadastro).call({from:window.coinbase});
		  	var val = await dados;

		  	document.getElementById("carteira").value = val[0];
		  	document.getElementById("pagamentoPremio").value = val[1];
		  	document.getElementById("recebimentoSinistro").value = val[2];
		  	document.getElementById("duracaoContrato").value = val[3];
		  	document.getElementById("ehSegurado").value = val[4];
		  	document.getElementById("valorApolice").value = val[5];
		  	document.getElementById("premioParcelado").value = val[6];
		  	document.getElementById("valorSinistro").value = val[7];
		  	document.getElementById("aluguel").value = val[8];
		  	document.getElementById("parcelasApolice").value = val[9];
		};
		async function getInformacao () {
		  var dados = window.Seguro.methods.getInformacao().call({from:window.coinbase});
		  var val = await dados;

		  document.getElementById("carteira").value = val[0];
		  document.getElementById("pagamentoPremio").value = val[1];
		  document.getElementById("valorApolice").value = val[2];
		  document.getElementById("premioParcelado").value = val[3];
		  document.getElementById("parcelasApolice").value = val[4];
		}
		async function getMontante () {
		  var dados = window.Seguro.methods.getMontante().call({from:window.coinbase});
		  var val = await dados;

		  document.getElementById("montanteSeguradora").value = val[0];
		  document.getElementById("montanteSeguro").value = val[1];
		  document.getElementById("contTotal").value = val[2];
		}

		if (!ethEnabled()) {
		  alert("Metamask or browser with Ethereum not detected!");
		}
	</script>



	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>

</body>
</html>


  